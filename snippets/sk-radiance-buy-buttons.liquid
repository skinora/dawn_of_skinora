{%- liquid
  assign resolved_section_id = section_id | default: section.id
  assign resolved_product_form_id = product_form_id | default: 'product-form-' | append: resolved_section_id
  assign current_variant = product.selected_or_first_available_variant
-%}

<div
  class="sk-radiance-buy-buttons sk-radiance-buy-buttons--{{ block.settings.button_layout }} sk-radiance-buy-buttons--{{ block.settings.button_style }}"
  {{ block.shopify_attributes }}
>
  <div class="sk-radiance-buy-buttons__container">
    <product-form class="sk-radiance-product-form" data-section-id="{{ resolved_section_id }}">
      <div class="product-form__error-message-wrapper" role="alert" hidden>
        <span class="svg-wrapper">
          {{- 'icon-error.svg' | inline_asset_content -}}
        </span>
        <span class="product-form__error-message"></span>
      </div>

      {%- form 'product',
        product,
        id: resolved_product_form_id,
        class: 'sk-radiance-product-form__form',
        novalidate: 'novalidate',
        data-type: 'add-to-cart-form'
      -%}
        <input
          type="hidden"
          name="id"
          value="{{ current_variant.id }}"
          class="product-variant-id"
          form="{{ resolved_product_form_id }}"
          data-sk-selected-variant-id
        >

        <div class="sk-radiance-buy-buttons__wrapper">
          <div class="sk-radiance-buy-buttons__buttons">
            <button
              id="ProductSubmitButton-{{ resolved_section_id }}"
              type="submit"
              name="add"
              class="sk-btn sk-btn--primary sk-radiance-buy-buttons__button"
              style="width: 100%;"
            >
              <span class="sk-radiance-buy-buttons__button-text">
                {{ 'products.product.add_to_cart' | t }}
              </span>
              {%- render 'loading-spinner' -%}
            </button>
          </div>
        </div>
      {%- endform -%}
    </product-form>
  </div>

  {%- comment -%} Pickup availability removed - snippet not available {%- endcomment -%}
</div>
