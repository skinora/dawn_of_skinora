{{ 'section-sk-customer-service.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;}
{%- endstyle -%}

<section class="sk-cs section-{{ section.id }}-padding color-{{ section.settings.color_scheme }}">
  <div class="container-xl px-xl-0 px-md-5 px-4">
    <!-- Header -->
    <header class="sk-cs__header {% if settings.animations_reveal_on_scroll %}scroll-trigger animate--fade-in{% endif %}">
      <h1 class="sk-cs__title">{{ section.settings.heading | escape }}</h1>
      {% if section.settings.subheading != blank %}
        <p class="sk-cs__subtitle">{{ section.settings.subheading }}</p>
      {% endif %}
    </header>

    <div class="sk-cs__grid">
      <!-- Contact form -->
      <div class="sk-cs__col sk-cs__form">
        {% form 'contact', id: 'ContactForm' %}
          {% if form.posted_successfully? %}
            <div class="sk-cs__notice sk-cs__notice--success" role="status">
              {{ section.settings.success_text | escape }}
            </div>
          {% elsif form.errors %}
            <div class="sk-cs__notice sk-cs__notice--error" role="alert">
              {{ 'templates.contact.form.error_heading' | t }}
            </div>
          {% endif %}

          <div class="sk-cs__fields">
            <div class="sk-cs__field">
              <label for="ContactForm-name">{{ section.settings.label_name }}</label>
              <input
                id="ContactForm-name"
                type="text"
                name="contact[name]"
                value="{{ form.contact.name | default: customer.name }}"
                autocomplete="name"
                required
              >
            </div>

            <div class="sk-cs__field">
              <label for="ContactForm-email">{{ section.settings.label_email }}</label>
              <input
                id="ContactForm-email"
                type="email"
                name="contact[email]"
                value="{{ form.contact.email | default: customer.email }}"
                autocomplete="email"
                required
              >
            </div>

            {% if section.settings.show_phone %}
              <div class="sk-cs__field">
                <label for="ContactForm-phone">{{ section.settings.label_phone }}</label>
                <input id="ContactForm-phone" type="tel" name="contact[phone]" autocomplete="tel">
              </div>
            {% endif %}

            {% if section.settings.show_order %}
              <div class="sk-cs__field">
                <label for="ContactForm-order">{{ section.settings.label_order }}</label>
                <input id="ContactForm-order" type="text" name="contact[Order number]">
              </div>
            {% endif %}

            {% if section.settings.show_topic %}
              <div class="sk-cs__field">
                <label for="ContactForm-topic">{{ section.settings.label_topic }}</label>
                <select id="ContactForm-topic" name="contact[Topic]">
                  {% for opt in section.settings.topic_options | split: ',' %}
                    <option value="{{ opt | strip }}">{{ opt | strip }}</option>
                  {% endfor %}
                </select>
              </div>
            {% endif %}

            <div class="sk-cs__field">
              <label for="ContactForm-message">{{ section.settings.label_message }}</label>
              <textarea id="ContactForm-message" name="contact[body]" rows="6" required></textarea>
            </div>

            {% if section.settings.show_consent %}
              <div class="sk-cs__checkbox">
                <input id="ContactForm-consent" type="checkbox" required>
                <label for="ContactForm-consent">{{ section.settings.label_consent }}</label>
              </div>
            {% endif %}
          </div>

          <button class="sk-cs__btn" type="submit">{{ section.settings.button_text }}</button>
        {% endform %}
      </div>

      <!-- Right column: info -->
      <aside class="sk-cs__col sk-cs__info">
        <div class="sk-cs__card">
          <h3>{{ section.settings.info_title }}</h3>
          <ul class="sk-cs__list">
            {% if section.settings.info_email != blank %}
              <li>
                <strong>E-post:</strong>
                <a href="mailto:{{ section.settings.info_email }}">{{ section.settings.info_email }}</a>
              </li>
            {% endif %}
            {% if section.settings.info_phone != blank %}
              <li>
                <strong>Telefon:</strong>
                <a href="tel:{{ section.settings.info_phone | replace: ' ', '' }}">{{ section.settings.info_phone }}</a>
              </li>
            {% endif %}
            {% if section.settings.info_hours != blank %}
              <li><strong>Åpningstider:</strong> {{ section.settings.info_hours }}</li>
            {% endif %}
            {% if section.settings.info_address != blank %}
              <li><strong>Adresse:</strong> {{ section.settings.info_address }}</li>
            {% endif %}
          </ul>
        </div>

        {% if section.settings.show_links %}
          <div class="sk-cs__links">
            {% if section.settings.link1_label != blank and section.settings.link1_url != blank %}
              <a class="sk-cs__link" href="{{ section.settings.link1_url }}">{{ section.settings.link1_label }}</a>
            {% endif %}
            {% if section.settings.link2_label != blank and section.settings.link2_url != blank %}
              <a class="sk-cs__link" href="{{ section.settings.link2_url }}">{{ section.settings.link2_label }}</a>
            {% endif %}
            {% if section.settings.link3_label != blank and section.settings.link3_url != blank %}
              <a class="sk-cs__link" href="{{ section.settings.link3_url }}">{{ section.settings.link3_label }}</a>
            {% endif %}
            {% if section.settings.link4_label != blank and section.settings.link4_url != blank %}
              <a class="sk-cs__link" href="{{ section.settings.link4_url }}">{{ section.settings.link4_label }}</a>
            {% endif %}
          </div>
        {% endif %}
      </aside>
    </div>

    {% if section.settings.show_topic_cards %}
      <div class="sk-cs__topics">
        {% for b in section.blocks %}
          <a class="sk-cs__topic" href="{{ b.settings.url }}">
            <span class="sk-cs__topic-icon">{{ 'icon-help.svg' | inline_asset_content }}</span>
            <span class="sk-cs__topic-title">{{ b.settings.title }}</span>
            <span class="sk-cs__topic-desc">{{ b.settings.desc }}</span>
          </a>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "SK Kundeservice",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Tittel", "default": "Kundeservice" },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Ingress",
      "default": "Trenger du hjelp med bestilling, levering eller retur? Send oss en melding – vi svarer så fort vi kan."
    },

    { "type": "checkbox", "id": "show_phone", "label": "Vis telefonfelt", "default": false },
    { "type": "checkbox", "id": "show_order", "label": "Vis ordrenummer", "default": true },
    { "type": "checkbox", "id": "show_topic", "label": "Vis emne-velger", "default": true },
    {
      "type": "text",
      "id": "topic_options",
      "label": "Emner (kommaseparert)",
      "default": "Bestilling, Frakt & levering, Retur & angrerett, Garanti & support, Annet"
    },
    { "type": "checkbox", "id": "show_consent", "label": "Vis samtykke-checkbox", "default": true },

    { "type": "text", "id": "label_name", "label": "Label – Navn", "default": "Fullt navn" },
    { "type": "text", "id": "label_email", "label": "Label – E-post", "default": "E-post" },
    { "type": "text", "id": "label_phone", "label": "Label – Telefon", "default": "Telefon (valgfritt)" },
    { "type": "text", "id": "label_order", "label": "Label – Ordrenummer", "default": "Ordrenummer (valgfritt)" },
    { "type": "text", "id": "label_topic", "label": "Label – Emne", "default": "Hva gjelder henvendelsen?" },
    { "type": "text", "id": "label_message", "label": "Label – Melding", "default": "Melding" },
    {
      "type": "text",
      "id": "label_consent",
      "label": "Tekst – Samtykke",
      "default": "Jeg godtar at Skinora lagrer og behandler opplysningene for å besvare henvendelsen."
    },
    { "type": "text", "id": "button_text", "label": "Send-knapp", "default": "Send melding" },
    {
      "type": "text",
      "id": "success_text",
      "label": "Suksess-melding",
      "default": "Takk! Vi har mottatt henvendelsen din."
    },

    { "type": "header", "content": "Kontaktinfo (høyre kolonne)" },
    { "type": "text", "id": "info_title", "label": "Tittel", "default": "Kontaktinformasjon" },
    { "type": "text", "id": "info_email", "label": "E-post", "default": "hello@skinora.no" },
    { "type": "text", "id": "info_phone", "label": "Telefon", "default": "" },
    { "type": "textarea", "id": "info_hours", "label": "Åpningstider", "default": "Man–Fre: 09–16" },
    { "type": "textarea", "id": "info_address", "label": "Adresse", "default": "Håvevegen 45, 3830 Ulefoss" },

    { "type": "checkbox", "id": "show_links", "label": "Vis hurtiglenker", "default": true },
    { "type": "text", "id": "link1_label", "label": "Lenke 1 – tekst", "default": "Bestilling & betaling" },
    { "type": "url", "id": "link1_url", "label": "Lenke 1 – URL" },
    { "type": "text", "id": "link2_label", "label": "Lenke 2 – tekst", "default": "Frakt & levering" },
    { "type": "url", "id": "link2_url", "label": "Lenke 2 – URL" },
    { "type": "text", "id": "link3_label", "label": "Lenke 3 – tekst", "default": "Retur & angrerett" },
    { "type": "url", "id": "link3_url", "label": "Lenke 3 – URL" },
    { "type": "text", "id": "link4_label", "label": "Lenke 4 – tekst", "default": "Garanti & support" },
    { "type": "url", "id": "link4_url", "label": "Lenke 4 – URL" },

    { "type": "checkbox", "id": "show_topic_cards", "label": "Vis temakort under", "default": false },

    { "type": "color_scheme", "id": "color_scheme", "label": "Fargeoppsett", "default": "background-1" },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding topp",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bunn",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "topic",
      "name": "Temakort",
      "settings": [
        { "type": "text", "id": "title", "label": "Tittel", "default": "Retur & Angrerett" },
        { "type": "text", "id": "desc", "label": "Kortbeskrivelse", "default": "Hvordan returnere eller bytte" },
        { "type": "url", "id": "url", "label": "Lenke" }
      ]
    }
  ],
  "presets": [{ "name": "SK Kundeservice" }]
}
{% endschema %}
