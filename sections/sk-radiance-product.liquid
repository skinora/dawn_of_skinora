{{ 'section-sk-radiance-product.css' | asset_url | stylesheet_tag }}
{{ 'section-sk-guarantee-banner.css' | asset_url | stylesheet_tag }}

<product-info
  id="MainProduct-{{ section.id }}"
  class="section-{{ section.id }}-padding gradient color-{{ section.settings.color_scheme }}"
  data-section="{{ section.id }}"
  data-product-id="{{ product.id }}"
  data-update-url="true"
  data-url="{{ product.url }}"
  {% if section.settings.image_zoom == 'hover' %}
    data-zoom-on-hover
  {% endif %}
>
  {{ 'section-main-product.css' | asset_url | stylesheet_tag }}
  {{ 'component-accordion.css' | asset_url | stylesheet_tag }}
  {{ 'component-price.css' | asset_url | stylesheet_tag }}
  {{ 'component-slider.css' | asset_url | stylesheet_tag }}
  {{ 'component-rating.css' | asset_url | stylesheet_tag }}
  {{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}

  {% unless product.has_only_default_variant %}
    {{ 'component-product-variant-picker.css' | asset_url | stylesheet_tag }}
    {{ 'component-swatch-input.css' | asset_url | stylesheet_tag }}
    {{ 'component-swatch.css' | asset_url | stylesheet_tag }}
  {% endunless %}
  {%- if product.quantity_price_breaks_configured? -%}
    {{ 'component-volume-pricing.css' | asset_url | stylesheet_tag }}
  {%- endif -%}

  {%- style -%}
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
    }

    @media screen and (min-width: 750px) {
      .section-{{ section.id }}-padding {
        padding-top: {{ section.settings.padding_top }}px;
        padding-bottom: {{ section.settings.padding_bottom }}px;
      }
    }
  {%- endstyle -%}

  <script src="{{ 'product-info.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>
  {%- if product.quantity_price_breaks_configured? -%}
    <script src="{{ 'show-more.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'price-per-item.js' | asset_url }}" defer="defer"></script>
  {%- endif -%}

  {% if section.settings.image_zoom == 'hover' %}
    <script id="EnableZoomOnHover-main" src="{{ 'magnify.js' | asset_url }}" defer="defer"></script>
  {% endif %}
  {%- if request.design_mode -%}
    <script src="{{ 'theme-editor.js' | asset_url }}" defer="defer"></script>
  {%- endif -%}

  {%- assign first_3d_model = product.media | where: 'media_type', 'model' | first -%}
  {%- if first_3d_model -%}
    {{ 'component-product-model.css' | asset_url | stylesheet_tag }}
    <link
      id="ModelViewerStyle"
      rel="stylesheet"
      href="https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css"
      media="print"
      onload="this.media='all'"
    >
    <link
      id="ModelViewerOverride"
      rel="stylesheet"
      href="{{ 'component-model-viewer-ui.css' | asset_url }}"
      media="print"
      onload="this.media='all'"
    >
  {%- endif -%}

  {% assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src' %}
  <div class="container-xl px-xl-0 px-md-5 px-4">
    <div class="sk-radiance-product sk-radiance-product--{{ section.settings.media_size }} sk-radiance-product--{{ section.settings.media_position }} sk-radiance-product--{{ section.settings.gallery_layout }} sk-radiance-product--mobile-{{ section.settings.mobile_thumbnails }} {% if product.media.size > 0 %}sk-radiance-product--with-media{% else %}sk-radiance-product--no-media{% endif %}">
      <!-- Product Media Gallery -->
      <div class="sk-radiance-product__media-wrapper">
        {% render 'sk-radiance-product-media-gallery', variant_images: variant_images %}

        {%- comment -%} Guarantee Banner below media gallery - conditional render {%- endcomment -%}
        {%- if section.settings.show_guarantee_below_media
          and product.metafields.custom.guarantee_banner_content != blank
        -%}
          <div class="sk-radiance-guarantee-banner sk-radiance-guarantee-banner--below-media">
            <div class="sk-radiance-guarantee-banner__content">
              {%- capture guarantee_content -%}
                {{ product.metafields.custom.guarantee_banner_content | metafield_tag }}
              {%- endcapture -%}
              {{ guarantee_content }}
            </div>
            {%- if section.settings.guarantee_button_text != blank
              and section.settings.guarantee_button_link != blank
            -%}
              <a href="{{ section.settings.guarantee_button_link }}" class="sk-radiance-guarantee-banner__button">
                {{ section.settings.guarantee_button_text }}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </a>
            {%- endif -%}
          </div>
        {%- endif -%}
      </div>

      <!-- Product Info -->
      <div class="sk-radiance-product__info-wrapper{% if settings.page_width > 1400 and section.settings.media_size == "small" %} sk-radiance-product__info-wrapper--extra-padding{% endif %}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
        <section
          id="ProductInfo-{{ section.id }}"
          class="sk-radiance-product__info-container{% if section.settings.enable_sticky_info %} sk-radiance-product__column-sticky{% endif %}"
        >
          {%- assign product_form_id = 'product-form-' | append: section.id -%}

          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when '@app' -%}
                {% render block %}
              {%- when 'text' -%}
                <p
                  class="sk-radiance-product__text inline-richtext{% if block.settings.text_style == 'uppercase' %} caption-with-letter-spacing{% elsif block.settings.text_style == 'subtitle' %} subtitle{% endif %}"
                  {{ block.shopify_attributes }}
                >
                  {{- block.settings.text -}}
                </p>
              {%- when 'title' -%}
                <div class="sk-radiance-product__title" {{ block.shopify_attributes }}>
                  <h1>{{ product.title | escape }}</h1>
                </div>
              {%- when 'rating' -%}
                {%- if product.metafields.reviews.rating.value != blank -%}
                  <div class="sk-radiance-rating-wrapper" {{ block.shopify_attributes }}>
                    {% liquid
                      assign rating_decimal = 0
                      assign decimal = product.metafields.reviews.rating.value.rating | modulo: 1
                      if decimal >= 0.3 and decimal <= 0.7
                        assign rating_decimal = 0.5
                      elsif decimal > 0.7
                        assign rating_decimal = 1
                      endif
                    %}
                    <div
                      class="rating"
                      role="img"
                      aria-label="{{ 'accessibility.star_reviews_info' | t: rating_value: product.metafields.reviews.rating.value, rating_max: product.metafields.reviews.rating.value.scale_max }}"
                    >
                      <span
                        aria-hidden="true"
                        class="rating-star"
                        style="--rating: {{ product.metafields.reviews.rating.value.rating | floor }}; --rating-max: {{ product.metafields.reviews.rating.value.scale_max }}; --rating-decimal: {{ rating_decimal }};"
                      ></span>
                    </div>
                    <p class="rating-text caption">
                      <span aria-hidden="true">
                        {{- product.metafields.reviews.rating.value }} /
                        {{ product.metafields.reviews.rating.value.scale_max -}}
                      </span>
                    </p>
                    <p class="rating-count caption">
                      <span aria-hidden="true">({{ product.metafields.reviews.rating_count }})</span>
                      <span class="visually-hidden">
                        {{- product.metafields.reviews.rating_count }}
                        {{ 'accessibility.total_reviews' | t -}}
                      </span>
                    </p>
                  </div>
                {%- endif -%}
              {%- when 'price' -%}
                <div id="price-{{ section.id }}" role="status" {{ block.shopify_attributes }}>
                  {%- render 'sk-radiance-price',
                    product: product,
                    use_variant: true,
                    show_badges: false,
                    price_class: 'price--large'
                  -%}
                </div>

              {%- when 'quantity_selector' -%}
                <div
                  id="Quantity-Form-{{ section.id }}"
                  class="sk-radiance-product-form__input sk-radiance-product-form__quantity{% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_vertical_offset < 0 %} sk-radiance-product-form__quantity-top{% endif %}"
                  {{ block.shopify_attributes }}
                >
                  {% comment %} TODO: enable theme-check once `item_count_for_variant` is accepted as valid filter {% endcomment %}
                  {% # theme-check-disable %}
                  {%- assign cart_qty = cart
                    | item_count_for_variant: product.selected_or_first_available_variant.id
                  -%}
                  {% # theme-check-enable %}
                  <span class="visually-hidden" id="quantity-label-{{ section.id }}">
                    {%- if cart_qty > 0 -%}
                      {{- 'products.product.quantity.in_cart_aria_label' | t: quantity: cart_qty -}}
                    {%- else -%}
                      {{- 'products.product.quantity.label' | t -}}
                    {%- endif -%}
                  </span>
                  <label
                    class="quantity__label form__label"
                    for="Quantity-{{ section.id }}"
                    aria-labelledby="quantity-label-{{ section.id }}"
                  >
                    <span aria-hidden="true" class="d-none">{{ 'products.product.quantity.label' | t }}</span>
                    <span class="quantity__rules-cart{% if cart_qty == 0 %} hidden{% endif %}" aria-hidden="true">
                      {%- render 'loading-spinner' -%}
                      <span
                        >(
                        {{- 'products.product.quantity.in_cart_html' | t: quantity: cart_qty -}}
                        )</span
                      >
                    </span>
                  </label>
                  <div class="price-per-item__container">
                    <quantity-input
                      class="quantity custom_quantity_input"
                      data-url="{{ product.url }}"
                      data-section="{{ section.id }}"
                    >
                      <button class="quantity__button" name="minus" type="button">
                        <span class="visually-hidden">
                          {{- 'products.product.quantity.decrease' | t: product: product.title | escape -}}
                        </span>
                        <span class="svg-wrapper">
                          {{- 'icon-minus.svg' | inline_asset_content -}}
                        </span>
                      </button>
                      <input
                        class="quantity__input"
                        type="number"
                        name="quantity"
                        id="Quantity-{{ section.id }}"
                        data-cart-quantity="{{ cart_qty }}"
                        data-min="{{ product.selected_or_first_available_variant.quantity_rule.min }}"
                        min="{{ product.selected_or_first_available_variant.quantity_rule.min }}"
                        {% if product.selected_or_first_available_variant.quantity_rule.max != null %}
                          data-max="{{ product.selected_or_first_available_variant.quantity_rule.max }}"
                          max="{{ product.selected_or_first_available_variant.quantity_rule.max }}"
                        {% endif %}
                        step="{{ product.selected_or_first_available_variant.quantity_rule.increment }}"
                        value="{{ product.selected_or_first_available_variant.quantity_rule.min }}"
                        form="{{ product_form_id }}"
                      >
                      <button class="quantity__button" name="plus" type="button">
                        <span class="visually-hidden">
                          {{- 'products.product.quantity.increase' | t: product: product.title | escape -}}
                        </span>
                        <span class="svg-wrapper">
                          {{- 'icon-plus.svg' | inline_asset_content -}}
                        </span>
                      </button>
                    </quantity-input>
                    {%- render 'sk-radiance-buy-buttons',
                      block: block,
                      product: product,
                      product_form_id: product_form_id,
                      section_id: section.id,
                      show_pickup_availability: true
                    -%}
                  </div>
                </div>
              {%- when 'product_features' -%}
                {%- comment -%} Check if this product should show features section {%- endcomment -%}
                {%- if product.metafields.custom.show_product_features == true -%}
                  <div class="sk-radiance-product-features" {{ block.shopify_attributes }}>
                    {%- for i in (1..10) -%}
                      {%- assign feature_enabled = 'feature_' | append: i | append: '_enabled' -%}
                      {%- assign feature_svg = 'feature_' | append: i | append: '_svg' -%}
                      {%- assign feature_top_text = 'feature_' | append: i | append: '_top_text' -%}
                      {%- assign feature_bottom_text = 'feature_' | append: i | append: '_bottom_text' -%}

                      {%- if block.settings[feature_enabled] -%}
                        <div class="sk-radiance-product-features__item">
                          <div class="sk-radiance-product-features__icon">
                            {{ block.settings[feature_svg] }}
                          </div>
                        </div>
                      {%- endif -%}
                    {%- endfor -%}
                  </div>
                {%- endif -%}
              {%- when 'product_description' -%}
                {%- comment -%} Check if this product should show description section {%- endcomment -%}

                {%- if product.metafields.custom.product_description_content != blank -%}
                  <div class="sk-radiance-product-description" {{ block.shopify_attributes }}>
                    <div class="sk-radiance-product-description__content">
                      {%- assign check_icon = '<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none"><path d="M9.37358 2.23904C9.91768 1.56137 10.1897 1.22254 10.5143 1.09327C10.8265 0.96891 11.1735 0.96891 11.4857 1.09327C11.8103 1.22254 12.0823 1.56137 12.6264 2.23904C12.9294 2.61642 13.0809 2.80511 13.2701 2.92419C13.4532 3.03945 13.6613 3.10781 13.8762 3.12336C14.0983 3.13943 14.3331 3.07588 14.8026 2.94879C15.6285 2.7252 16.0415 2.61341 16.3721 2.69574C16.7105 2.78003 17.0028 2.99579 17.186 3.29657C17.3649 3.59038 17.3867 4.01752 17.4305 4.8718C17.4549 5.34921 17.4671 5.58791 17.5476 5.79383C17.6304 6.0057 17.7649 6.19281 17.9383 6.33768C18.1069 6.47848 18.329 6.5641 18.7732 6.73534C19.5631 7.03982 19.958 7.19206 20.178 7.4511C20.4108 7.72534 20.5252 8.08303 20.4953 8.4437C20.4672 8.78439 20.2376 9.1396 19.7785 9.85004C19.5226 10.2461 19.3946 10.4441 19.3395 10.6561C19.2809 10.8815 19.2809 11.1185 19.3395 11.3439C19.3946 11.5559 19.5226 11.7539 19.7785 12.15C20.2376 12.8604 20.4672 13.2156 20.4953 13.5563C20.5252 13.917 20.4108 14.2747 20.178 14.5489C19.958 14.8079 19.5631 14.9602 18.7732 15.2647C18.329 15.4359 18.1069 15.5215 17.9383 15.6623C17.7649 15.8072 17.6304 15.9943 17.5476 16.2062C17.4671 16.4121 17.4549 16.6508 17.4305 17.1282C17.3867 17.9825 17.3649 18.4096 17.186 18.7034C17.0028 19.0042 16.7105 19.22 16.3721 19.3043C16.0415 19.3866 15.6285 19.2748 14.8026 19.0512C14.3331 18.9241 14.0983 18.8606 13.8762 18.8766C13.6613 18.8922 13.4532 18.9605 13.2701 19.0758C13.0809 19.1949 12.9294 19.3836 12.6264 19.761C12.0823 20.4386 11.8103 20.7775 11.4857 20.9067C11.1735 21.0311 10.8265 21.0311 10.5143 20.9067C10.1897 20.7775 9.91768 20.4386 9.37358 19.761C9.07058 19.3836 8.91908 19.1949 8.72989 19.0758C8.54676 18.9605 8.33874 18.8922 8.12378 18.8766C7.9017 18.8606 7.66694 18.9241 7.19743 19.0512C6.37148 19.2748 5.95851 19.3866 5.62791 19.3043C5.28947 19.22 4.9972 19.0042 4.81405 18.7034C4.63515 18.4096 4.61328 17.9825 4.56954 17.1282C4.5451 16.6508 4.53288 16.4121 4.45238 16.2062C4.36956 15.9943 4.23514 15.8072 4.0617 15.6623C3.89313 15.5215 3.67101 15.4359 3.22677 15.2647C2.4369 14.9602 2.04197 14.8079 1.82204 14.5489C1.58921 14.2747 1.47484 13.917 1.50465 13.5563C1.53281 13.2156 1.76237 12.8604 2.22148 12.15C2.47741 11.7539 2.60538 11.5559 2.6605 11.3439C2.71912 11.1185 2.71912 10.8815 2.6605 10.6561C2.60538 10.4441 2.47741 10.2461 2.22148 9.85004C1.76237 9.1396 1.53281 8.78439 1.50465 8.4437C1.47484 8.08303 1.58921 7.72534 1.82204 7.4511C2.04197 7.19206 2.4369 7.03982 3.22677 6.73534C3.67101 6.5641 3.89313 6.47848 4.0617 6.33768C4.23514 6.19281 4.36956 6.0057 4.45238 5.79383C4.53288 5.58791 4.5451 5.34921 4.56954 4.8718C4.61328 4.01752 4.63515 3.59038 4.81405 3.29657C4.9972 2.99579 5.28947 2.78003 5.62791 2.69574C5.95851 2.61341 6.37148 2.7252 7.19743 2.94879C7.66694 3.07588 7.9017 3.13943 8.12378 3.12336C8.33874 3.10781 8.54676 3.03945 8.72989 2.92419C8.91908 2.80511 9.07058 2.61642 9.37358 2.23904Z" fill="#30273E" stroke="white" stroke-width="1.5" stroke-linejoin="round"/><path d="M8 12.3333C8 12.3333 8.875 12.3333 9.75 14C9.75 14 12.5294 9.83333 15 9" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>' -%}
                      {%- capture description_content -%}
                        {{ product.metafields.custom.product_description_content | metafield_tag }}
                      {%- endcapture -%}
                      {{ description_content | replace: '~', check_icon }}
                    </div>
                  </div>
                {%- endif -%}

              {%- when 'guarantee_banner' -%}
                {%- comment -%} Check if this product should show guarantee banner section {%- endcomment -%}

                {%- if product.metafields.custom.guarantee_banner_content != blank -%}
                  <div class="sk-radiance-guarantee-banner" {{ block.shopify_attributes }}>
                    <div class="sk-radiance-guarantee-banner__content">
                      {%- capture guarantee_content -%}
                        {{ product.metafields.custom.guarantee_banner_content | metafield_tag }}
                      {%- endcapture -%}
                      {{ guarantee_content }}
                    </div>
                    {%- if block.settings.button_text != blank and block.settings.button_link != blank -%}
                      <a href="{{ block.settings.button_link }}" class="sk-radiance-guarantee-banner__button">
                        {{ block.settings.button_text }}
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                      </a>
                    {%- endif -%}
                  </div>
                {%- endif -%}

              {%- when 'promotion_logos' -%}
                {%- comment -%} Check if this product should show promotion logos section {%- endcomment -%}

                {%- if product.metafields.custom.promotion_logos.value != blank -%}
                  <div class="sk-product-promotion-logos-block" {{ block.shopify_attributes }}>
                    <style>
                      .sk-product-promotion-logos-block-{{ section.id }} {
                        overflow-x: hidden;
                        background: #F1EFF4;
                        padding: 2rem 0;
                        margin-bottom: 3rem;
                      }
                      .sk-product-promotion-logos-block-{{ section.id }} .sw-publication__scroll-parent {
                        position: relative;
                        width: 100%;
                        height: 10rem;
                        overflow: hidden;
                      }

                      .sk-product-promotion-logos-block-{{ section.id }} .sw-publication__scroll-element {
                        width: inherit;
                        height: inherit;
                        position: absolute;
                        left: 0%;
                        top: 0%;
                        display: flex;
                        align-items: center;
                        justify-content: space-around;
                      }
                      .sk-product-promotion-logos-block-{{ section.id }} .sw-publication__scroll-element .sw-publication__card {
                        flex: 0 0 100px;
                      }
                      .sk-product-promotion-logos-block-{{ section.id }} .sw-publication__scroll-element .sw-publication__card img {
                        width: 100%;
                        height: auto;
                        display: block;
                      }

                      .sk-product-promotion-logos-block-{{ section.id }} .primary {
                        animation: primary-{{ section.id }} 30s linear infinite;
                      }

                      .sk-product-promotion-logos-block-{{ section.id }} .secondary {
                        animation: secondary-{{ section.id }} 30s linear infinite;
                      }

                      @keyframes primary-{{ section.id }} {
                        from {
                          transform: translateX(0);
                        }
                        to {
                          transform: translateX(-100%);
                        }
                      }

                      @keyframes secondary-{{ section.id }} {
                        from {
                          transform: translateX(100%);
                        }
                        to {
                          transform: translateX(0);
                        }
                      }
                    </style>

                    <div class="sk-product-promotion-logos-block-{{ section.id }}">
                      <div class="sw-publication__scroll-parent">
                        <div class="sw-publication__scroll-element primary">
                          {% for logo in product.metafields.custom.promotion_logos.value %}
                            <div class="sw-publication__card">
                              <img
                                src="{{ logo | image_url: width: 104, height: 104 }}"
                                alt="Promotion logo {{ forloop.index }}"
                                width="104"
                                height="104"
                                loading="lazy"
                              >
                            </div>
                          {% endfor %}
                        </div>
                        <div class="sw-publication__scroll-element secondary">
                          {% for logo in product.metafields.custom.promotion_logos.value %}
                            <div class="sw-publication__card">
                              <img
                                src="{{ logo | image_url: width: 104, height: 104 }}"
                                alt="Promotion logo {{ forloop.index }}"
                                width="104"
                                height="104"
                                loading="lazy"
                              >
                            </div>
                          {% endfor %}
                        </div>
                      </div>
                    </div>
                  </div>
                {%- endif -%}

              {%- when 'variant_picker' -%}
                {% render 'sk-radiance-product-variant-picker',
                  product: product,
                  block: block,
                  product_form_id: product_form_id
                %}
            {%- endcase -%}
          {%- endfor -%}
        </section>
      </div>
    </div>

    {% render 'sk-radiance-product-media-modal', variant_images: variant_images %}

    {%- if product.media.size > 0 -%}
      <script src="{{ 'product-modal.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'media-gallery.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {%- if first_3d_model -%}
      <script type="application/json" id="ProductJSON-{{ product.id }}">
        {{ product.media | where: 'media_type', 'model' | json }}
      </script>
      <script src="{{ 'product-model.js' | asset_url }}" defer></script>
    {%- endif -%}

    {%- liquid
      if product.selected_or_first_available_variant.featured_media
        assign seo_media = product.selected_or_first_available_variant.featured_media
      else
        assign seo_media = product.featured_media
      endif
    -%}
    {%- comment -%} SEO media variable available for future use {%- endcomment -%}

    <script type="application/ld+json">
      {{ product | structured_data }}
    </script>
  </div>

  <!-- Sticky Bottom Bar -->
  <div class="sk-radiance-sticky-bottom-bar" id="stickyBottomBar-{{ section.id }}">
    <div class="container">
      <div class="sk-radiance-sticky-bottom-bar__content">
        <div class="sk-radiance-sticky-bottom-bar__info">
          <h3 class="sk-radiance-sticky-bottom-bar__product-name">{{ product.title }}</h3>
          <div class="sk-radiance-sticky-bottom-bar__price">
            {%- render 'sk-radiance-price',
              product: product,
              use_variant: true,
              show_badges: false,
              price_class: 'price--small'
            -%}
          </div>
        </div>
        <button
          type="button"
          class="sk-radiance-sticky-bottom-bar__button"
          data-product-form="{{ product_form_id }}"
          data-section-id="{{ section.id }}"
        >
          <span>{{ 'products.product.add_to_cart' | t }}</span>
        </button>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const stickyBar = document.getElementById('stickyBottomBar-{{ section.id }}');
      const productForm = document.querySelector('#{{ product_form_id }}');
      const stickyButton = stickyBar.querySelector('.sk-radiance-sticky-bottom-bar__button');
      const mainProductSection = document.getElementById('MainProduct-{{ section.id }}');

      // Show/hide sticky bar based on scroll position
      function toggleStickyBar() {
        if (!mainProductSection) return;

        const productRect = mainProductSection.getBoundingClientRect();
        const isProductVisible = productRect.top < window.innerHeight && productRect.bottom > 0;

        // Show sticky bar when product section is not fully visible
        if (productRect.bottom < 0 || productRect.top > window.innerHeight - 100) {
          stickyBar.classList.add('visible');
        } else {
          stickyBar.classList.remove('visible');
        }
      }

      // Handle sticky button click
      if (stickyButton && productForm) {
        stickyButton.addEventListener('click', function (e) {
          e.preventDefault();

          // Trigger the main form submit
          const submitButton = productForm.querySelector('[type="submit"]');
          if (submitButton) {
            submitButton.click();
          }
        });
      }

      // Listen to scroll events
      window.addEventListener('scroll', toggleStickyBar);
      window.addEventListener('resize', toggleStickyBar);

      // Initial check
      toggleStickyBar();
    })();
  </script>
</product-info>

{% schema %}
{
  "name": "SK Radiance Product",
  "tag": "section",
  "class": "section",
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "text",
          "default": "Text content",
          "label": "Text"
        },
        {
          "type": "select",
          "id": "text_style",
          "options": [
            {
              "value": "body",
              "label": "Body"
            },
            {
              "value": "subtitle",
              "label": "Subtitle"
            },
            {
              "value": "uppercase",
              "label": "Uppercase"
            }
          ],
          "default": "body",
          "label": "Text Style"
        }
      ]
    },
    {
      "type": "title",
      "name": "Title",
      "limit": 1
    },
    {
      "type": "price",
      "name": "Price",
      "limit": 1
    },
    {
      "type": "rating",
      "name": "Rating",
      "limit": 1
    },
    {
      "type": "quantity_selector",
      "name": "Quantity Selector",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "default": true,
          "label": "Show Dynamic Checkout Buttons"
        }
      ]
    },
    {
      "type": "variant_picker",
      "name": "Variant Picker",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "picker_type",
          "options": [
            {
              "value": "dropdown",
              "label": "Dropdown"
            },
            {
              "value": "button",
              "label": "Button"
            }
          ],
          "default": "button",
          "label": "Picker Type"
        }
      ]
    },
    {
      "type": "buy_buttons",
      "name": "Buy Buttons",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "default": true,
          "label": "Show Dynamic Checkout"
        },
        {
          "type": "checkbox",
          "id": "show_gift_card_recipient",
          "default": true,
          "label": "Show Gift Card Recipient"
        }
      ]
    },
    {
      "type": "product_features",
      "name": "Product Features",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Feature 1"
        },
        {
          "type": "checkbox",
          "id": "feature_1_enabled",
          "default": true,
          "label": "Enable Feature 1"
        },
        {
          "type": "html",
          "id": "feature_1_svg",
          "label": "Feature 1 SVG Code"
        },
        {
          "type": "header",
          "content": "Feature 2"
        },
        {
          "type": "checkbox",
          "id": "feature_2_enabled",
          "default": true,
          "label": "Enable Feature 2"
        },
        {
          "type": "html",
          "id": "feature_2_svg",
          "label": "Feature 2 SVG Code"
        },

        {
          "type": "header",
          "content": "Feature 3"
        },
        {
          "type": "checkbox",
          "id": "feature_3_enabled",
          "default": true,
          "label": "Enable Feature 3"
        },
        {
          "type": "html",
          "id": "feature_3_svg",
          "label": "Feature 3 SVG Code"
        },

        {
          "type": "header",
          "content": "Feature 4"
        },
        {
          "type": "checkbox",
          "id": "feature_4_enabled",
          "default": true,
          "label": "Enable Feature 4"
        },
        {
          "type": "html",
          "id": "feature_4_svg",
          "label": "Feature 4 SVG Code"
        },

        {
          "type": "header",
          "content": "Feature 5"
        },
        {
          "type": "checkbox",
          "id": "feature_5_enabled",
          "default": true,
          "label": "Enable Feature 5"
        },
        {
          "type": "html",
          "id": "feature_5_svg",
          "label": "Feature 5 SVG Code"
        }
      ]
    },
    {
      "type": "product_description",
      "name": "Product Description",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Product-Specific Control"
        },
        {
          "type": "paragraph",
          "content": "To show description on specific products only, add these metafields to each product:"
        },

        {
          "type": "paragraph",
          "content": "1. 'custom.product_description_content' (Rich text) - Use the rich text editor to format your content with headings, paragraphs, and lists"
        }
      ]
    },
    {
      "type": "guarantee_banner",
      "name": "Guarantee Banner",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Product-Specific Control"
        },
        {
          "type": "paragraph",
          "content": "To show guarantee banner on specific products only, add this metafield to each product:"
        },
        {
          "type": "paragraph",
          "content": "1. 'custom.guarantee_banner_content' (Rich text) - Use the rich text editor to add your guarantee text and subtitle"
        },
        {
          "type": "header",
          "content": "Button Settings"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "LES MER"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    },
    {
      "type": "promotion_logos",
      "name": "Promotion Logos",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Product-Specific Control"
        },
        {
          "type": "paragraph",
          "content": "To show promotion logos on specific products only, add this metafield to each product:"
        },
        {
          "type": "paragraph",
          "content": "Metafield: 'custom.promotion_logos' (List of files)"
        },
        {
          "type": "paragraph",
          "content": "Add multiple logo images to the list, and they will automatically scroll across the screen with animation."
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_sticky_info",
      "default": true,
      "label": "Enable Sticky Info"
    },
    {
      "type": "header",
      "content": "Guarantee Banner Below Media Gallery"
    },
    {
      "type": "checkbox",
      "id": "show_guarantee_below_media",
      "default": false,
      "label": "Show Guarantee Banner Below Media Gallery",
      "info": "Requires product to have 'custom.guarantee_banner_content' metafield"
    },
    {
      "type": "text",
      "id": "guarantee_button_text",
      "label": "Guarantee Button Text",
      "default": "LES MER"
    },
    {
      "type": "url",
      "id": "guarantee_button_link",
      "label": "Guarantee Button Link"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "media_size",
      "options": [
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        }
      ],
      "default": "large",
      "label": "Media Size"
    },
    {
      "type": "checkbox",
      "id": "constrain_to_viewport",
      "default": true,
      "label": "Constrain to Viewport"
    },
    {
      "type": "select",
      "id": "gallery_layout",
      "options": [
        {
          "value": "stacked",
          "label": "Stacked"
        },
        {
          "value": "columns",
          "label": "Columns"
        },
        {
          "value": "thumbnail",
          "label": "Thumbnail"
        },
        {
          "value": "thumbnail_slider",
          "label": "Thumbnail Slider"
        }
      ],
      "default": "thumbnail_slider",
      "label": "Gallery Layout"
    },
    {
      "type": "select",
      "id": "mobile_thumbnails",
      "options": [
        {
          "value": "columns",
          "label": "Columns"
        },
        {
          "value": "show",
          "label": "Show"
        },
        {
          "value": "hide",
          "label": "Hide"
        }
      ],
      "default": "show",
      "label": "Mobile Thumbnails"
    },
    {
      "type": "select",
      "id": "media_position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left",
      "label": "Media Position"
    },
    {
      "type": "select",
      "id": "image_zoom",
      "options": [
        {
          "value": "lightbox",
          "label": "Lightbox"
        },
        {
          "value": "hover",
          "label": "Hover"
        },
        {
          "value": "none",
          "label": "None"
        }
      ],
      "default": "lightbox",
      "label": "Image Zoom"
    },
    {
      "type": "checkbox",
      "id": "hide_variants",
      "default": false,
      "label": "Hide Variants"
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "default": false,
      "label": "Enable Video Looping"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 12
    }
  ]
}
{% endschema %}
