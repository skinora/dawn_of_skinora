{{ 'section-sk-radiance-product.css' | asset_url | stylesheet_tag }}

<style>
  .sk-radiance-pills {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;
    margin: 1rem 0;
  }
  .sk-pill {
    border: 2px solid #d4d4dc;
    border-radius: 999px;
    padding: 0.6rem 1.2rem;
    font-weight: 600;
    font-size: 0.95rem;
    background: #fff;
  }
</style>

{%- assign product_info = product.metafields.custom.product_info -%}
{%- assign product_form_id = 'product-form-' | append: section.id -%}

<product-info
  id="MainProduct-{{ section.id }}"
  class="section-{{ section.id }}-padding"
  data-product-id="{{ product.id }}"
  data-url="{{ product.url }}"
>
  <div class="page-width">
    <!--
      =========================
           HERO SECTION
      ==========================
    -->
    {% comment %}
      {% if product_info.radiance_heading
        or product_info.radiance_subheading
        or product_info.radiance_content
        or product_info.radiance_image
      %}
    {% endcomment %}
    <section class="sk-product-radiance-hero">
      <div class="sk-hero-grid">
        {% if product_info.radiance_image %}
          <div class="sk-hero-image">
            <img
              src="{{ product_info.radiance_image | image_url: width: 720 }}"
              alt="{{ product_info.radiance_heading | escape }}"
              width="720"
              height="720"
              loading="lazy"
            >
          </div>
        {% endif %}

        <div class="sk-hero-content">
          {% if product_info.radiance_eyebrow %}
            <p class="sk-eyebrow">
              {{ product_info.radiance_eyebrow }}
            </p>
          {% endif %}

          <h1 class="sk-product-title">
            {{ product_info.radiance_heading | default: product.title }}
          </h1>

          {% if product_info.radiance_subheading %}
            <p class="sk-product-subtitle">
              {{ product_info.radiance_subheading }}
            </p>
          {% endif %}

          <!-- Reviews (Okendo) -->
          <div class="sk-product-reviews">
            {% for block in section.blocks %}
              {% if block.type == '@app' %}
                {% render block %}
              {% endif %}
            {% endfor %}
          </div>

          {% if product_info.radiance_content %}
            <div class="sk-hero-copy">
              {{ product_info.radiance_content | metafield_tag }}
            </div>
          {% endif %}
        </div>
      </div>
    </section>
    {% comment %} {% endif %} {% endcomment %}

    <!--
      =========================
           PRODUCT CORE
      ==========================
    -->
    <section class="sk-product-core">
      <!-- PRICE -->
      <div class="sk-product-price">
        {% render 'sk-radiance-price',
          product: product,
          use_variant: true,
          show_badges: true,
          price_class: 'price--large'
        %}
      </div>

      <!-- PILLS -->
      {% if product_info.radiance_pills %}
        <div class="sk-radiance-pills" role="list">
          {% assign pills = product_info.radiance_pills | split: '\n' %}
          {% for pill in pills %}
            {% if pill != blank %}
              <span class="sk-pill">{{ pill | strip }}</span>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

      <!-- VARIANTS -->
      {% if product.variants.size > 1 %}
        {% render 'sk-radiance-product-variant-picker', product: product, product_form_id: product_form_id %}
      {% endif %}

      <!-- QUANTITY -->
      {% render 'sk-radiance-quantity', product: product, product_form_id: product_form_id, section: section %}

      <!-- BUY BUTTON -->
      {% render 'sk-radiance-buy-buttons', product: product, product_form_id: product_form_id %}

      <!-- TRUST BADGES -->
      {% if product_info.trust_badges %}
        <div class="sk-trust-badges">
          {{ product_info.trust_badges | metafield_tag }}
        </div>
      {% endif %}
    </section>
  </div>

  <!-- JSON-LD -->
  <script type="application/ld+json">
    {{ product | structured_data }}
  </script>
</product-info>

{% schema %}
{
  "name": "SK Radiance Product",
  "tag": "section",
  "class": "section",
  "blocks": [
    {
      "type": "@app"
    }
  ],
  "settings": []
}
{% endschema %}
