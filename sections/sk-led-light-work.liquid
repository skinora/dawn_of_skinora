<style>
  /* === SECTION WRAPPER === */
  .sk-wavelengths {
    --sk-color-brand: #30273e;
    --sk-color-neutral: #6c6c6c;
    --sk-color-border: #e6e6e6;
    --sk-color-body: #333333;
    --sk-color-tag-text: #ffffff;
    padding: 4rem 0 6rem;
  }

  .sk-header__section {
    text-align: center;
    margin-bottom: 3rem;
    color: inherit;
  }

  .sk-wavelengths__eyebrow {
    margin: 0 0 0.5rem;
    font-size: 12px;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--sk-color-neutral);
    font-weight: 500;
    text-align: center;
  }

  /* === DESKTOP GRID === */
  .sk-wavelengths__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 48px;
    max-width: 1800px;
    margin: 0 auto;
    padding: 0 24px;
    align-items: start;
  }

  .sk-wavelengths__slider {
    display: none;
  }

  .sk-wavelengths__empty {
    text-align: center;
    color: var(--sk-color-neutral);
    font-size: 14px;
    margin-top: 1rem;
  }

  /* === CARD WRAPPER === */
  .sk-wavelength {
    background: #ffffff;
    border-radius: 8px;
    padding: 32px;
    border: 1px solid var(--sk-color-border);
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: none;
    position: relative;
    overflow: visible;
  }

  /* === IMAGE WRAPPER === */
  .sk-wavelength__visual {
    width: 100%;
    max-width: 550px;
    margin: 0 auto 16px;
    aspect-ratio: 1 / 0.75;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .sk-wavelength__visual img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    border-radius: 8px !important;
  }

  .sk-tag {
    position: absolute;
    top: -16px;
    left: 50%;
    transform: translateX(-50%);
    display: inline-block;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 1px;
    padding: 4px 10px;
    color: var(--sk-color-tag-text);
    background: var(--sk-color-brand);
    border-radius: 4px;
    text-transform: uppercase;
    white-space: nowrap;
  }

  .sk-wavelength__eyebrow {
    margin: 0 0 8px;
    font-size: 12px;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--sk-color-neutral);
    font-weight: 500;
  }

  /* === TITLES === */
  .sk-wavelength__title {
    font-size: 22px;
    font-weight: 600;
    margin: 0 0 12px;
    line-height: 1.3;
    color: var(--sk-color-brand);
  }

  /* === BENEFITS LIST === */
  .sk-wavelength__benefits {
    list-style: none;
    padding: 0;
    margin: 0;
    text-align: left;
    margin-top: 0;
    width: 100%;
    max-width: 500px;
  }

  .sk-wavelength__benefits li {
    font-size: 16px;
    margin-bottom: 8px;
    display: flex;
    gap: 4px;
    align-items: flex-start;
    line-height: 1.3;
    color: var(--sk-color-body);
    font-weight: 400;
  }

  .sk-wavelength__benefits li::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--sk-color-brand);
    margin-top: 6px;
  }

  /* === MOBILE SLIDER === */
  @media (max-width: 750px) {
    .sk-wavelengths__grid {
      display: none;
    }
    .sk-wavelengths__slider {
      display: block;
    }
    .sk-wavelength {
      padding: 24px 12px;
    }
    .sk-wavelength__visual {
      max-width: 420px;
    }
    .sk-wavelength__title {
      font-size: 20px;
    }
    .sk-wavelength__benefits li {
      font-size: 15px;
    }
  }
</style>

<section class="sk-wavelengths section--full-bleed sk-body-text--strong">
  <div class="page-width">
    {% if section.settings.sk_led_light_work_eyebrow != blank %}
      <p class="sk-wavelengths__eyebrow">
        {{ section.settings.sk_led_light_work_eyebrow }}
      </p>
    {% endif %}

    {% if section.settings.sk_led_light_work_heading != blank %}
      <h1 class="sk-header__section sk-section-heading sk-section-heading--h1 sk-heading-text--strong sk-heading-size--large">
        {{ section.settings.sk_led_light_work_heading }}
      </h1>
    {% endif %}

    {% assign sk_cards_metafield = product.metafields['custom.sk-led-light-work-card-product'] %}
    {% if sk_cards_metafield == blank %}
      {% assign sk_cards_metafield = product.metafields.custom['sk-led-light-work-card-product'] %}
    {% endif %}
    {% if sk_cards_metafield == blank %}
      {% assign sk_cards_metafield = product.metafields.custom.sk_led_light_work_card_product %}
    {% endif %}

    {% assign sk_cards = blank %}
    {% if sk_cards_metafield != blank %}
      {% assign sk_cards = sk_cards_metafield.references
        | default: sk_cards_metafield.value
        | default: sk_cards_metafield
      %}
    {% endif %}
    {% assign sk_cards_count = sk_cards | size %}

    {% if sk_cards_count == 0 %}
      {% if request.design_mode %}
        <p class="sk-wavelengths__empty">
          Connect the metafield <code>custom.sk-led-light-work-card-product</code> or
          <code>custom.sk_led_light_work_card_product</code> (list of metaobjects) to display wavelength cards.
        </p>
      {% endif %}
    {% else %}
      <!-- DESKTOP GRID -->
      <div class="sk-wavelengths__grid">
        {% for card in sk_cards %}
          <div class="sk-wavelength">
            {% if card.show_highlight_text %}
              <span class="sk-tag">
                {{ card.highlight_tag_text | default: 'NY DYPTVIRKENDE BØLGELENGDE' }}
              </span>
            {% endif %}

            {% if card.image != blank %}
              <div class="sk-wavelength__visual">
                <img
                  src="{{ card.image | image_url: width: 1000 }}"
                  alt="{{ card.title | escape }}"
                  loading="lazy"
                  width="{{ card.image.width }}"
                  height="{{ card.image.height }}"
                >
              </div>
            {% endif %}

            {% if card.eyebrow != blank %}
              <p class="sk-wavelength__eyebrow">{{ card.eyebrow }}</p>
            {% endif %}

            {% if card.title != blank %}
              <h3 class="sk-wavelength__title">{{ card.title }}</h3>
            {% endif %}

            {% if card.benefits != blank %}
              <ul class="sk-wavelength__benefits">
                {% assign items = card.benefits | newline_to_br | split: '<br />' %}
                {% for item in items %}
                  {% assign line = item | strip %}
                  {% if line != blank %}
                    <li>{{ line }}</li>
                  {% endif %}
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <!-- MOBILE SWIPER -->
      <div class="sk-wavelengths__slider sk-wavelengths-swiper-{{ section.id }}">
        <div class="swiper llw-swiper-{{ section.id }}">
          <div class="swiper-wrapper">
            {% for card in sk_cards %}
              <div class="swiper-slide">
                <div class="sk-wavelength">
                  {% if card.show_highlight_text %}
                    <span class="sk-tag">
                      {{ card.highlight_tag_text | default: 'NY DYPTVIRKENDE BØLGELENGDE' }}
                    </span>
                  {% endif %}

                  {% if card.image != blank %}
                    <div class="sk-wavelength__visual">
                      <img
                        src="{{ card.image | image_url: width: 800 }}"
                        alt="{{ card.title | escape }}"
                        loading="lazy"
                        width="{{ card.image.width }}"
                        height="{{ card.image.height }}"
                      >
                    </div>
                  {% endif %}

                  {% if card.eyebrow != blank %}
                    <p class="sk-wavelength__eyebrow">{{ card.eyebrow }}</p>
                  {% endif %}

                  {% if card.title != blank %}
                    <h3 class="sk-wavelength__title">{{ card.title }}</h3>
                  {% endif %}

                  {% if card.benefits != blank %}
                    <ul class="sk-wavelength__benefits">
                      {% assign items = card.benefits | newline_to_br | split: '<br />' %}
                      {% for item in items %}
                        {% assign line = item | strip %}
                        {% if line != blank %}
                          <li>{{ line }}</li>
                        {% endif %}
                      {% endfor %}
                    </ul>
                  {% endif %}
                </div>
              </div>
            {% endfor %}
          </div>
          <div class="swiper-pagination"></div>
        </div>
      </div>
    {% endif %}
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var mql = window.matchMedia('(max-width: 750px)');
    var swiperInstance = null;
    var container = document.querySelector('.sk-wavelengths-swiper-{{ section.id }} .swiper');

    function setup() {
      if (mql.matches && !swiperInstance) {
        swiperInstance = new Swiper(container, {
          slidesPerView: 1,
          spaceBetween: 20,
          pagination: {
            el: container.querySelector('.swiper-pagination'),
            clickable: true,
          },
        });
      } else if (!mql.matches && swiperInstance) {
        swiperInstance.destroy(true, true);
        swiperInstance = null;
      }
    }

    setup();
    mql.addEventListenebenefitsr('change', setup);
  });
</script>

{% schema %}
{
  "name": "SK Led Light Work",
  "settings": [
    {
      "type": "text",
      "id": "sk_led_light_work_eyebrow",
      "label": "Eyebrow label",
      "default": "VITENSKAPEN BAK SKINORA LED"
    },
    {
      "type": "text",
      "id": "sk_led_light_work_heading",
      "label": "Title",
      "default": "Hvordan Fungerer Skinora LED Lys"
    }
  ],
  "presets": [
    {
      "name": "SK Led Light Work"
    }
  ]
}
{% endschema %}
