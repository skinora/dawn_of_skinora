<style>
  .sk-tech-{{ section.id }} {
    padding: {{ section.settings.pad_y_mobile }}px 0;
  }
  @media (min-width: 701px) {
    .sk-tech-{{ section.id }} {
      padding: {{ section.settings.pad_y_desktop }}px 0;
    }
  }

  .sk-tech-{{ section.id }} .sk-tech__heading {
    font-size: var(--section-heading-h2);
    line-height: var(--section-heading-h2-line);
    font-weight: 700;
    color: #30273E;
    text-align: center;
    max-width: 800px;
    margin: 0 auto 40px;
  }

  @media (max-width: 435px) {
    .sk-tech-{{ section.id }} .sk-tech__heading {
      font-size: calc(var(--section-heading-h2) * 0.9);
      line-height: var(--section-heading-h2-line);
      margin-bottom: 16px;
    }
  }

  /* Layout */
  .sk-tech-{{ section.id }} .sk-tech__row {
    display: flex;
    gap: 32px;
    align-items: stretch;
    justify-content: center;
  }

  .sk-tech-{{ section.id }} .sk-tech__img {
    flex: 0 1 40%;
    max-width: 40%;
  }

  .sk-tech-{{ section.id }} .sk-tech__img img {
    width: 100%;
    height: auto;
    display: block;
  }

  .sk-tech-{{ section.id }} .sk-tech__content {
    flex: 0 1 20%;
    max-width: {{ section.settings.content_max_width }}px;
    min-width: 220px;
  }

  .sk-tech-{{ section.id }} .sk-tech__content :where(p) {
    font-size: var(--sk-font-size-medium);
    line-height: 1.6;
    color: #30273E;
    margin: 0 0 16px 0;
  }

  .sk-tech-{{ section.id }} .sk-tech__content :where(h3, h4) {
    font-size: var(--sk-font-size-medium);
    font-weight: 600;
    color: #30273E;
    margin: 0 0 12px 0;
  }

  /* Arrow (hidden on mobile) */
  .sk-tech-{{ section.id }} .sk-tech__arrow {
    display: flex;
    justify-content: center;
    margin-top: 12px;
  }

  .sk-tech-{{ section.id }} .sk-tech__slider {
    display: none;
  }

  @media (max-width: 900px) {
    .sk-tech-{{ section.id }} .sk-tech__row {
      gap: 20px;
    }

    .sk-tech-{{ section.id }} .sk-tech__img,
    .sk-tech-{{ section.id }} .sk-tech__content {
      max-width: 100%;
      flex-basis: 100%;
    }
  }

  @media (max-width: 700px) {
    .sk-tech-{{ section.id }} .sk-tech__arrow { display: none; }
    .sk-tech-{{ section.id }} .sk-tech__row { display: none; }
    .sk-tech-{{ section.id }} .sk-tech__slider { display: block; }

    .sk-tech-{{ section.id }} .sk-tech__content :where(p) {
      font-size: var(--sk-font-size-medium);
      line-height: 22px;
      margin-bottom: 12px;
    }
  }
</style>

<section class="sk-tech-{{ section.id }}">
  <div class="page-width">
    <!-- ðŸ”¥ Wider parent container -->
    {% if section.settings.heading != blank %}
      <h2 class="sk-tech__heading sk-section-heading sk-section-heading--h2">
        {{ section.settings.heading | escape }}
      </h2>
    {% endif %}

    <div class="sk-tech__row">
      {% if section.settings.left_image != blank %}
        <div class="sk-tech__img sk-tech__left">
          {%- assign li = section.settings.left_image -%}
          <img
            srcset="
              {{ li | image_url: width: 700 }} 700w,
              {{ li | image_url: width: 900 }} 900w,
              {{ li | image_url: width: 1200 }} 1200w
            "
            sizes="(min-width: 1200px) 40vw, (min-width: 701px) 42vw, 95vw"
            src="{{ li | image_url: width: 900 }}"
            alt="{{ li.alt | default: section.settings.heading | escape }}"
            loading="lazy"
            width="{{ li.width }}"
            height="{{ li.height }}"
          >
        </div>
      {% endif %}

      <div class="sk-tech__content sk-tech__center">
        {% if section.settings.content_html != blank %}
          {{ section.settings.content_html }}
        {% endif %}
        {% if section.settings.show_arrow %}
          <div class="sk-tech__arrow">
            {{ 'technology-arrow.svg' | inline_asset_content }}
          </div>
        {% endif %}
      </div>

      {% if section.settings.right_image != blank %}
        <div class="sk-tech__img sk-tech__right">
          {%- assign ri = section.settings.right_image -%}
          <img
            srcset="
              {{ ri | image_url: width: 700 }} 700w,
              {{ ri | image_url: width: 900 }} 900w,
              {{ ri | image_url: width: 1200 }} 1200w
            "
            sizes="(min-width: 1200px) 40vw, (min-width: 701px) 42vw, 95vw"
            src="{{ ri | image_url: width: 900 }}"
            alt="{{ ri.alt | default: section.settings.heading | escape }}"
            loading="lazy"
            width="{{ ri.width }}"
            height="{{ ri.height }}"
          >
        </div>
      {% endif %}
    </div>

    <div class="sk-tech__slider sk-tech-slider-{{ section.id }}">
      <div class="swiper sk-tech-swiper-{{ section.id }}">
        <div class="swiper-wrapper">
          {% if section.settings.left_image != blank %}
            {%- assign li = section.settings.left_image -%}
            <div class="swiper-slide">
              <div class="sk-tech__img">
                <img
                  src="{{ li | image_url: width: 900 }}"
                  srcset="
                    {{ li | image_url: width: 600 }} 600w,
                    {{ li | image_url: width: 900 }} 900w
                  "
                  sizes="90vw"
                  alt="{{ li.alt | default: section.settings.heading | escape }}"
                  loading="lazy"
                  width="{{ li.width }}"
                  height="{{ li.height }}"
                >
              </div>
            </div>
          {% endif %}

          {% if section.settings.content_html != blank %}
            <div class="swiper-slide">
              <div class="sk-tech__content">
                {{ section.settings.content_html }}
                {% if section.settings.show_arrow %}
                  <div class="sk-tech__arrow">
                    {{ 'technology-arrow.svg' | inline_asset_content }}
                  </div>
                {% endif %}
              </div>
            </div>
          {% endif %}

          {% if section.settings.right_image != blank %}
            {%- assign ri = section.settings.right_image -%}
            <div class="swiper-slide">
              <div class="sk-tech__img">
                <img
                  src="{{ ri | image_url: width: 900 }}"
                  srcset="
                    {{ ri | image_url: width: 600 }} 600w,
                    {{ ri | image_url: width: 900 }} 900w
                  "
                  sizes="90vw"
                  alt="{{ ri.alt | default: section.settings.heading | escape }}"
                  loading="lazy"
                  width="{{ ri.width }}"
                  height="{{ ri.height }}"
                >
              </div>
            </div>
          {% endif %}
        </div>
        <div class="swiper-pagination"></div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var mql = window.matchMedia('(max-width: 700px)');
    var swiperInstance = null;
    var container = document.querySelector('.sk-tech-slider-{{ section.id }} .swiper');

    function setupTechSwiper() {
      if (!container) {
        return;
      }
      if (mql.matches && !swiperInstance) {
        swiperInstance = new Swiper(container, {
          slidesPerView: 1,
          spaceBetween: 18,
          pagination: {
            el: container.querySelector('.swiper-pagination'),
            clickable: true,
          },
        });
      } else if (!mql.matches && swiperInstance) {
        swiperInstance.destroy(true, true);
        swiperInstance = null;
      }
    }

    setupTechSwiper();
    mql.addEventListener('change', setupTechSwiper);
  });
</script>

{% schema %}
{
  "name": "SK Technology (Generic)",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Teknologien bak Skinora" },
    { "type": "image_picker", "id": "left_image", "label": "Left image" },
    {
      "type": "html",
      "id": "content_html",
      "label": "Center content",
      "default": "<p>Klinisk LED-teknologi som aktiverer hudens egen fornyelse â€“ for fastere, klarere og sterkere hud.</p>"
    },
    { "type": "image_picker", "id": "right_image", "label": "Right image" },
    { "type": "checkbox", "id": "show_arrow", "label": "Show center arrow (hidden on mobile)", "default": true },

    { "type": "header", "content": "Layout & Style" },
    {
      "type": "range",
      "id": "content_max_width",
      "label": "Center content max width",
      "min": 360,
      "max": 720,
      "step": 20,
      "default": 520
    },
    {
      "type": "range",
      "id": "pad_y_desktop",
      "label": "Padding Y (desktop)",
      "min": 20,
      "max": 160,
      "step": 4,
      "default": 112
    },
    {
      "type": "range",
      "id": "pad_y_mobile",
      "label": "Padding Y (mobile)",
      "min": 16,
      "max": 120,
      "step": 4,
      "default": 60
    }
  ],
  "presets": [{ "name": "SK Technology (Generic)" }]
}
{% endschema %}
